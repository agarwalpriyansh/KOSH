<%- include('./partials/header') %>

<div class="w-full min-h-screen flex flex-wrap px-20 py-20 gap-10 bg-gray-50 text-gray-800">

  <% user.cart.forEach((product) => { %>
    <div class="w-[30%] h-1/2 rounded-lg shadow-md bg-white overflow-hidden relative group">
      
      <!-- Image Container with Remove Button -->
      <div class="w-full h-80 bg-gray-200 flex items-center justify-center relative">
        <% if (product.image) { %>
          <img class="h-[12rem] object-contain" src="data:image/jpeg;base64,<%= product.image.toString('base64') %>" />
        <% } else { %>
          <span class="text-gray-500">No Image</span>
        <% } %>

        <!-- Remove Button -->
        <form action="/removefromcart/<%= product._id %>" method="POST">
          <button type="submit" class="absolute top-3 right-3 bg-red-500 text-white rounded-full w-8 h-8 flex items-center justify-center text-sm font-bold hover:bg-red-600 transition duration-150 ease-in-out">
            &times;
          </button>
        </form>
      </div>

      <!-- Product Info -->
      <div class="w-full flex justify-between px-5 py-4">
        <h3 class="text-xl font-semibold"><%= product.name || 'Unnamed Product' %></h3>
        <div class="flex items-center gap-2">
          <i class="w-7 h-4 bg-white border border-gray-400 flex rounded-full items-center justify-center ri-add-line cursor-pointer hover:bg-gray-100"></i>
          <div class="px-2 py-1 rounded-md bg-gray-100 text-black">01</div>
          <i class="w-7 h-7 bg-white border border-gray-400 flex rounded-full items-center justify-center ri-subtract-line cursor-pointer hover:bg-gray-100"></i>
        </div>
      </div>

      <!-- Total -->
      <div class="flex items-center justify-between px-5 py-3 border-t border-gray-200">
        <h4 class="text-md text-gray-600">Net Total</h4>
        <h2 class="text-md font-bold text-green-600">â‚¹ <%= product.price || 0 %></h2>
      </div>
    </div>
  <% }); %>

</div>

<%- include('./partials/footer') %>
